
<form [formGroup]="addEmployeeForm" #addEmployee (ngSubmit)="onSubmit(addEmployee)">
    <mat-accordion class="example-headers-align">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Employee Details
                </mat-panel-title>
                <mat-icon>account_circle</mat-icon>
            </mat-expansion-panel-header>

            <mat-form-field>
                <input matInput placeholder="Employee Id " class="form-control" formControlName="empId"required>
                <div *ngIf="fval.empId.invalid && (fval.empId.dirty || fval.empId.touched)" class="alert alert-danger">

                    <div *ngIf="fval.empId.errors.required">
                        Employee Id  is required.
                    </div>
                    <div *ngIf="fval.empId.errors.pattern">
                        Employee Id must be an number.
                    </div>
                </div>

            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="Employee Name " required formControlName="empName" class="form-control"/>
                <div *ngIf="fval.empName.invalid && (fval.empName.dirty || fval.empName.touched)" class="alert alert-danger">
                    <div *ngIf="fval.empName.errors.required">
                        Employee Name is required
                    </div>
                    <div *ngIf="fval.empName.errors.maxLength">
                        Maximum Length must be 100.
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="Designation " required formControlName="designation" class="form-control"/>
                <div *ngIf="fval.designation.invalid && (fval.designation.dirty || fval.designation.touched)" class="alert alert-danger">
                    <div *ngIf="fval.designation.errors.required">
                        Designation is required
                    </div>
                </div>
            </mat-form-field>
            <div>
                <mat-form-field>
                    <mat-label>Location</mat-label>
                    <mat-select matNativeControl required formControlName="primaryWorkLocation" class="form-control">
                        <mat-option value="Mepz">Mepz</mat-option>
                        <mat-option value="Guindy">Guindy</mat-option>
                        <mat-option value="Hyderabad"> Hyderabad</mat-option>
                        <mat-option value="Bangalore">Bangalore</mat-option>
                    </mat-select>
                    <div *ngIf="fval.primaryWorkLocation.invalid && (fval.primaryWorkLocation.dirty || fval.primaryWorkLocation.touched)" class="alert alert-danger">
                        <div *ngIf="fval.primaryWorkLocation.errors.required">
                            Location is required
                        </div>
                    </div>
                </mat-form-field>
            </div>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="HtcExperience " type="number" required formControlName="htcExperience" class="form-control"/>
                <div *ngIf="fval.htcExperience.invalid && (fval.htcExperience.dirty || fval.htcExperience.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.htcExperience.errors.required">
                        HtcExperience is required
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="OverallExperience" type="number" required formControlName="overallExperience" class="form-control"/>
                <div *ngIf="fval.overallExperience.invalid && (fval.overallExperience.dirty || fval.overallExperience.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.overallExperience.errors.required">
                        OverallExperience is required
                    </div>
                </div>
            </mat-form-field>&nbsp;

            <mat-form-field>
                <input matInput placeholder="Primary Skills " required formControlName="primarySkills" class="form-control" />
                <div *ngIf="fval.primarySkills.invalid && (fval.primarySkills.dirty || fval.primarySkills.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.primarySkills.errors.required">
                        Primary Skills is required
                    </div>
                </div>
            </mat-form-field>
            &nbsp;&nbsp;&nbsp;
            <mat-panel-title>
                PersonalDetails
            </mat-panel-title>
            <mat-form-field>
                <input type="ëmail" matInput placeholder="Official Email Address " required formControlName="officialEmailAddr" class="form-control" />
                <div *ngIf="fval.officialEmailAddr.invalid && (fval.officialEmailAddr.dirty || fval.officialEmailAddr.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.officialEmailAddr.errors.required">
                        Official Email Address is required
                    </div>
                    <div *ngIf="fval.officialEmailAddr.errors.email">
                       Email Address is Invalid
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input type="ëmail"matInput placeholder=" Personal Email Address" required formControlName="emailAddr" class="form-control" />
                <div *ngIf="fval.emailAddr.invalid && (fval.emailAddr.dirty || fval.emailAddr.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.emailAddr.errors.required">
                        Email Address is required
                    </div>
                    <div *ngIf="fval.emailAddr.errors.email">
                        Email Address is invalid
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="Extension Number " required formControlName="extensionNumber"
                       class="form-control" />
                <div *ngIf="fval.extensionNumber.invalid && (fval.extensionNumber.dirty || fval.extensionNumber.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.extensionNumber.errors.required">
                        Extension Number is required
                    </div>
                    <div *ngIf="fval.extensionNumber.errors.maxLength">
                        Extension Number should not exceed 6.
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="Mobile Number "  required formControlName="mobileNumber" class="form-control"/>
                <div *ngIf="fval.mobileNumber.invalid && (fval.mobileNumber.dirty || fval.mobileNumber.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.mobileNumber.errors.required">
                        Mobile Number is required
                    </div>
                    <div *ngIf="fval.mobileNumber.errors.pattern">
                        Please enter a valid mobile number
                        </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder=" Alternative Mobile Number "formControlName="alternativeMobileNumber" class="form-control" />
                <div *ngIf="fval.alternativeMobileNumber.invalid && (fval.alternativeMobileNumber.dirty || fval.alternativeMobileNumber.touched)"
                     class="alert alert-danger">

                    <div *ngIf="fval.alternativeMobileNumber.errors.pattern">
                        Please enter a valid mobile number
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-panel-title>
                Address
            </mat-panel-title>
            <mat-form-field>
                <input matInput placeholder="AddressLine " required formControlName="addressLine" class="form-control" />
                <div *ngIf="fval.addressLine.invalid && (fval.addressLine.dirty || fval.addressLine.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.addressLine.errors.required">
                        Address Line is required
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="City" required formControlName="city" class="form-control"/>
                <div *ngIf="fval.city.invalid && (fval.city.dirty || fval.city.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.city.errors.required">
                        City is required
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
            <mat-form-field>
                <input matInput placeholder="State " required formControlName="state" class="form-control" />
                <div *ngIf="fval.state.invalid && (fval.state.dirty || fval.state.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.state.errors.required">
                        State is required
                    </div>
                </div>
            </mat-form-field>

            <mat-select-country   countryFormControl="country" (onCountrySelected)="countrySelect($event)" required >
                <div *ngIf="fval.country.invalid && (fval.country.dirty || fval.country.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.country.errors.required">
                        Country is required
                    </div>
                </div>
            </mat-select-country>
            &nbsp;

            <mat-form-field>
                <input matInput placeholder="Pincode " required formControlName="pincode" class="form-control" />
                <div *ngIf="fval.pincode.invalid && (fval.pincode.dirty || fval.pincode.touched)"
                     class="alert alert-danger">
                    <div *ngIf="fval.pincode.errors.required">
                        Pincode is required
                    </div>
                    <div *ngIf="fval.pincode.errors.minLength">
                        Pincode should be 6 digit.
                    </div>
                    <div *ngIf="fval.pincode.errors.maxLength">
                        Pincode should be 6 digit.
                    </div>
                </div>
            </mat-form-field>
            &nbsp;
        </mat-expansion-panel>

        <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Project Details
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div formArrayName="projects">
                <div *ngFor="let project of projectsArray().controls; let i=index">
                    <div [formGroupName]="i">
                        <mat-form-field>
                            <mat-label>Project Name</mat-label>
                            <mat-select formControlName="projectId" required class="form-control">
                                <mat-option *ngFor="let projectObj of projectList" [value]="projectObj.projectId">{{projectObj.projectName}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        &nbsp;
                        <mat-form-field>
                            <input matInput placeholder="Reporting To " required formControlName="reportingTo"
                                   class="form-control"/>
                        </mat-form-field>
                        &nbsp;
                        <mat-form-field>
                            <mat-label>Start date</mat-label>
                            <input type="date" matInput  formControlName="startDate" required class="form-control"/>
                        </mat-form-field>
                        &nbsp;
                        <mat-form-field>
                            <mat-label>End date</mat-label>
                            <input type="date" matInput  formControlName="endDate" class="form-control"/>
                        </mat-form-field>
                        &nbsp;
                        <mat-form-field>
                            <mat-label>Location</mat-label>
                            <mat-select  formControlName="location" required class="form-control">
                                <mat-option value="Mepz">Mepz</mat-option>
                                <mat-option value="Guindy">Guindy</mat-option>
                                <mat-option value="HTCHyderabad"> HTCHyderabad</mat-option>
                                <mat-option value="Ciber">Ciber</mat-option>
                                <mat-option value="Client">Client</mat-option>
                            </mat-select>
                        </mat-form-field>
                        &nbsp;
                        <mat-checkbox formControlName="active">Active</mat-checkbox>
                        &nbsp;
                        <button (click)="removeProject(i)">Remove</button>
                    </div>
                </div>
            </div>
            <button type="button" (click)="addProject()">Assign Project</button>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Skills
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-list>
                <div formArrayName="skills">
                    <div *ngFor="let skill of skillsArray().controls; let i=index">
                        <div [formGroupName]="i">
                            <mat-form-field>
                                <mat-label>Skill Name</mat-label>
                                <mat-select matNativeControl  required formControlName="skillName" class="form-control" >
                                    <mat-option *ngFor="let skillName of skillNames" [value]="skillName">{{skillName}}</mat-option>
                                </mat-select>
                            </mat-form-field>
                            &nbsp;
                            <mat-form-field>
                                <mat-label>Experience</mat-label>
                                <input matInput required formControlName="experience" class="form-control"/>
                            </mat-form-field>
                            &nbsp; &nbsp;
                            <button (click)="removeSkill(i)">Remove</button>
                        </div>
                    </div>
                </div>
                <button type="button" (click)="addSkill()">Add Skill</button>
            </mat-list>
        </mat-expansion-panel>
        <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Training Details
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-list>
                <div formArrayName="trainings">
                    <div *ngFor="let training of trainingsArray().controls; let i=index">
                        <div [formGroupName]="i">
                            <mat-form-field>
                                <mat-label>Training Name</mat-label>
                                <input matInput required formControlName="nameOfTraining" class="form-control"/>
                            </mat-form-field>
                            &nbsp;
                            <mat-form-field>
                                <mat-label>Description</mat-label>
                                <input matInput required formControlName="trainingDescription" class="form-control"/>
                            </mat-form-field>
                            &nbsp; &nbsp;
                            <mat-form-field>
                                <mat-label>Duration</mat-label>
                                <input matInput required formControlName="duration" class="form-control"/>
                            </mat-form-field>
                            &nbsp; &nbsp;
                            <button (click)="removeTraining(i)">Remove</button>
                        </div>
                    </div>
                </div>
                <button type="button" (click)="addTraining()">Add Training Experience</button>
            </mat-list>
        </mat-expansion-panel>
        <mat-action-row>
            <button type="submit"  class="button" [disabled]="!addEmployeeForm.valid" color="primary">Submit</button>
        </mat-action-row>
    </mat-accordion>
</form>

